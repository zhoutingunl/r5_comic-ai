# 小说转漫画生成器 - 运行程序说明


## 必需的外部服务
- **阿里云 DashScope API Key** (必需)
  - 用于文本分析和图像生成
  - 获取地址: https://dashscope.aliyun.com/

## 快速开始

### 1. 克隆项目

```bash
git clone <repository-url>
cd comic-ai
```

### 2. 安装依赖

```bash
# 使用 pnpm
pnpm install

# 或使用 npm
npm install

# 或使用 yarn
yarn install
```

### 3. 启动开发服务器

```bash
pnpm dev
```

应用将在 `http://localhost:3000` 启动


## 详细配置说明

### 获取 DashScope API Key

1. 访问 [阿里云 DashScope 控制台](https://dashscope.aliyun.com/)
2. 登录或注册阿里云账号
3. 在控制台中创建 API Key
4. 复制生成的 API Key

⚠️ **注意**: 
- 新用户通常有免费额度
- 请妥善保管您的 API Key，不要泄露给他人
- API Key 仅存储在您的浏览器本地，不会上传到服务器

### 在应用中配置 API Key

1. 启动应用后，点击右上角的 **"⚙️ 配置 API Key"** 按钮
2. 在弹出的对话框中粘贴您的 DashScope API Key
3. 点击 **"保存"** 按钮
4. 系统会自动验证 API Key 的有效性

配置完成后，API Key 会保存在浏览器的 localStorage 中，下次访问时无需重新配置。

## 使用指南

### 基本工作流程
请为小说中出现的角色创建角色库，然后输入小说文本，选择漫画风格，生成漫画。

```
输入小说文本 → 分析场景 → 生成漫画 → 下载结果
```

### 1. 输入小说文本

- 在主界面的文本框中粘贴或输入小说内容
- 建议每次输入 500-2000 字的片段
- 支持中文和英文小说

**示例文本**:
```
夜幕降临，李明站在摩天大楼的天台边缘，俯瞰着灯火通明的城市。
突然，一个黑影从身后闪过。
"你终于来了。"李明头也不回地说道。
"是的，我们该做个了断了。"黑影冷冷地回应。
```

### 2. 分析场景

#### 单分镜模式
1. 选择 **"单分镜"** 布局模式
2. 点击 **"开始分析"** 按钮
3. AI 会自动将小说文本分解为多个场景
4. 每个场景包含:
   - 场景描述
   - 出现的角色
   - 场景设置（地点、时间）
   - 情绪氛围
   - 对话内容
   - 动作描述

#### 多分镜模式
1. 选择 **"多分镜"** 布局模式
2. 设置每页包含的场景数量（2-4个）
3. 点击 **"开始分析"** 按钮
4. AI 会将场景组织成多分镜页面布局

### 3. 管理角色库

#### 创建角色
1. 点击右侧边栏的 **"角色库"** 标签
2. 点击 **"+ 创建角色"** 按钮
3. 输入角色信息:
   - **角色名称**: 如 "李明"
   - **角色描述**: 详细的外貌、服装、特征描述
4. 点击 **"生成三视图"** 按钮
5. AI 会自动生成角色的三视图参考图

**角色描述示例**:
```
25岁的年轻侦探，身高180cm，短黑发，棕色眼睛，
穿着深蓝色风衣和黑色长裤，表情冷峻，气质沉稳
```

### 4. 选择漫画风格

在 **"漫画风格"** 下拉菜单中选择:
- 🇯🇵 **日本漫画** (Japanese Manga) - 细腻的线条，大眼睛
- 🇺🇸 **美式漫画** (American Comics) - 粗犷有力，饱和色彩
- 🇰🇷 **韩国漫画** (Korean Manhwa) - 写实风格，细腻光影
- 🇨🇳 **国漫** (Chinese Manhua) - 中国风，传统元素
- 🇪🇺 **欧美漫画** (European Comics) - 艺术性强，独特画风

### 5. 生成漫画

#### 生成单个面板
- 点击场景卡片上的 **"🎨 生成此面板"** 按钮
- 等待 10-30 秒生成完成

#### 批量生成
1. 点击 **"🚀 生成所有漫画"** 按钮
2. 系统会使用任务队列批量生成
3. 可以在进度条中查看生成进度

#### 查看队列状态
- **运行中**: 正在生成的任务数
- **等待中**: 排队等待的任务数
- **已完成**: 已成功生成的任务数
- **失败**: 生成失败的任务数

### 6. 编辑和重新生成

#### 编辑场景描述
1. 点击场景卡片上的 **"✏️"** 按钮
2. 修改场景描述、角色、对话等信息
3. 点击 **"保存"** 按钮
4. 重新生成该场景的漫画

#### 重新生成
- 如果对生成结果不满意，可以点击 **"🔄 重新生成"** 按钮
- 每次生成可能产生不同的效果
